# spring_redis

### 학습 목표

- Spring Boot와 Redis 연동 방법
- 캐시 전략과 성능 최적화 기법
- 실시간 데이터 처리 시스템 구축
- RESTful API 설계 및 구현

![구현화면](https://github.com/user-attachments/assets/bfe18443-79ce-4f31-b0dd-a4eb85c8f2b6)

---

## 🔄 리팩토링: Write-Back 패턴 적용

### 리팩토링 목적

폴링 제거 및 Write-Back 패턴 적용으로 **DB 부하 감소**와 **응답 속도 개선**을 목표로 진행되었습니다.

### 주요 변경사항

#### 1. Redis 중심 구조로 변경

- **검색 시**: 결과를 바로 Redis에 저장 → DB 반영은 n분 단위로 비동기 동기화
- **조회 시**: 기본적으로 Redis 조회 → Redis에 없을 때만 DB 접근
- **DB 저장 로직**: 모두 비동기 처리로 전환

#### 2. DB 접근 방식 최적화

- ❌ 3초마다 주기적으로 DB 조회하는 방식 제거
- ✅ "검색 버튼 클릭 시", 인기 검색어·최근 검색어에 실제 변화가 있을 때만 DB 접근

#### 3. 적용된 패턴

**Write-Back 패턴 (쓰기 지연 패턴)**

- 검색 시 즉시 Redis에만 반영하고, DB 저장은 비동기로 지연 처리
- 더티셋(Dirty Set)을 사용해 변경된 키워드만 추적하여 스케줄러가 주기적으로 DB에 동기화
- **장점**: 검색 응답 속도 향상, DB 부하 분산

**캐시 우선 조회 (Cache-Aside 패턴)**

- 조회 시 Redis를 먼저 확인하고, 없을 때만 DB에서 조회 후 Redis에 채움
- **장점**: 대부분의 조회가 Redis에서 처리되어 응답 속도 개선

**이벤트 기반 갱신**

- 3초 폴링 제거 → 검색 버튼 클릭 시에만 인기/최근 검색어 갱신
- **장점**: 불필요한 네트워크 호출 제거, 리소스 절약

### 핵심 변경 포인트

- 검색 시 Redis 갱신 + 더티셋 기록
- n분 단위 스케줄러로 DB 동기화 (기본 60초, `app.sync.delay-ms`로 조정 가능)
- UI 구조 변경 없음 (폴링만 제거)

---

## 📄 라이선스

이 프로젝트는 풀스택(Front+Back) AI 챗봇 프로젝트 학습 목적으로 제작되었습니다.